require=function t(e,o,n){function i(s,a){if(!o[s]){if(!e[s]){var r="function"==typeof require&&require;if(!a&&r)return r(s,!0);if(c)return c(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){var o=e[s][1][t];return i(o?o:t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var c="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({Biglure:[function(t,e,o){"use strict";cc._RFpush(e,"cfd0eQnkVlJo6cTIMxpMAWC","Biglure"),cc.Class({"extends":cc.Component,properties:{speed:1,lurePer:1,interval:5},onLoad:function(){var t=this;this.moveDirection=1,this.throwCount=0,this.node.on(cc.Node.EventType.TOUCH_END,function(e){if(255===t.node.opacity){cc.log("throw_lure");var o=new cc.Event.EventCustom("throw_lure",(!0));o.setUserData(t.node.x),t.node.dispatchEvent(o),t.throwCount++,t.throwCount===t.lurePer&&(t.node.opacity=0,t.throwCount=0,t.scheduleOnce(function(){t.init(),t.node.opacity=255},t.interval))}})},init:function(){var t=-cc.winSize.width/2+50+(cc.winSize.width-50)*Math.random();this.node.x=t},strategyRun:function(){var t=this.node.x+this.speed*this.moveDirection;t>cc.winSize.width/2-50&&(t=cc.winSize.width/2-50,this.moveDirection=-this.moveDirection,cc.log("turn left and x:"+t+" moveDirection:"+this.moveDirection)),t<-cc.winSize.width/2+50&&(t=-cc.winSize.width/2+50,this.moveDirection=-this.moveDirection),this.node.x=t},update:function(t){this.strategyRun()}}),cc._RFpop()},{}],Board:[function(t,e,o){"use strict";cc._RFpush(e,"b23a41E/OhBYLJETDQftNiQ","Board"),cc.Class({"extends":cc.Component,properties:{star1:cc.Node,star2:cc.Node,star3:cc.Node,stageString:cc.Node,stageScore:cc.Node,stageBestScore:cc.Node},onLoad:function(){},init:function(t){var e=this,o=t.stage;e.stage=o,e.stageString.getComponent(cc.Label).string="第"+o+"关",e.currStage=t,e.stageScore.getComponent(cc.Label).string=t.score,e.getStars(t.score);var n=cc.sys.localStorage.getItem("stage"+o);if(n)e.bestScore=0;else{var i=JSON.parse(n);e.stageBestScore.getComponent(cc.Label).string=i.bestScore,e.bestScore=i.bestScore}},getStars:function(t){for(var e=this,o=cc.find("Canvas").getComponent("Game").stagesData,n=0;n<o.length;n++)if(o[n].stage===e.stage){t>=o[n].star1?this.star1.color=new cc.Color(255,255,255):this.star1.color=new cc.Color(100,100,100),t>=o[n].star2?this.star2.color=new cc.Color(255,255,255):this.star2.color=new cc.Color(100,100,100),t>=o[n].star3?this.star3.color=new cc.Color(255,255,255):this.star3.color=new cc.Color(100,100,100);break}},command:function(t,e){var o=this;o.saveData(),cc.log(e),o.node.dispatchEvent(new cc.Event.EventCustom(e,(!0))),o.node.active=!1},saveData:function(){var t=this;t.currStage.score>t.bestScore&&(t.bestScore=t.currStage.score);var e={bestScore:t.bestScore};cc.sys.localStorage.setItem("stage"+t.stage,JSON.stringify(e))},countStar:function(t,e){}}),cc._RFpop()},{}],Camera:[function(t,e,o){"use strict";cc._RFpush(e,"5371euSGt9HZ567kKwxoVB7","Camera"),cc.Class({"extends":cc.Component,properties:{target:{"default":null,type:cc.Node},map:{"default":null,type:cc.Node}},onLoad:function(){var t=cc.winSize;this.screenMiddle=cc.v2(t.width/2,t.height/2),this.boundingBox=cc.rect(0,0,this.map.width,this.map.height),this.minx=-(this.boundingBox.xMax-t.width),this.maxx=this.boundingBox.xMin,this.miny=-(this.boundingBox.yMax-t.height),this.maxy=this.boundingBox.yMin},update:function(t){var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO),n=e.sub(o),i=n.add(this.screenMiddle);i.x=cc.clampf(i.x,this.minx,this.maxx),i.y=cc.clampf(i.y,this.miny,this.maxy),this.node.position=this.node.parent.convertToNodeSpaceAR(i)}}),cc._RFpop()},{}],Control:[function(t,e,o){"use strict";cc._RFpush(e,"4bf4e6w4ypNwKNdmlXGYAJe","Control");var n=cc.Enum({stop:0,control:1,find:2,random:3});cc.Class({"extends":cc.Component,properties:{move_rate:.4,max_seed:10,speed:10,turn_speed:5,idle_time:5,favorite:!1,star:cc.Node,lure:{type:cc.Node,"default":null}},onLoad:function(){var t=this;this.run_status=n.stop,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.anim=this.getComponent(cc.Animation),this.moveDirection=null,this.sprite=this.getComponent(cc.Sprite),this.schedule(function(){cc.log("fish status:"+t.run_status),t.run_status===n.stop&&Math.random()>this.move_rate&&t.randomRun()},t.idle_time*Math.random())},init:function(t){cc.log(this),cc.js.mixin(this,t),this.favorite||(this.star.active=!1),cc.log("this.node.parent"),cc.log(this.node.parent)},destroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(t){var e=0;if(t.keyCode!==this.moveDirection){switch(t.keyCode){case cc.KEY.left:e=270;break;case cc.KEY.right:e=90;break;case cc.KEY.up:e=0;break;case cc.KEY.down:e=180;break;case cc.KEY.space:return void this.eatAction()}cc.log("this.moveDirection:"+this.moveDirection),this.actionControl(e,t.keyCode)}this.moveDirection=t.keyCode},countAngle:function(t,e){var o=t.y-e.y,n=t.x-e.x,i=Math.abs(o)/Math.abs(n),c=0;return o>0&&n<0?c=180*Math.atan(i)/Math.PI-90:o>0&&n>0?c=90-180*Math.atan(i)/Math.PI:o<0&&n<0?c=180*-Math.atan(i)/Math.PI-90:o<0&&n>0&&(c=180*Math.atan(i)/Math.PI+90),c},eatAction:function(){var t=this;if(!this.lure)return void(this.run_status=n.stop);var e=function(){if(t.lure.isValid||t.wantEatThink(),void 0==t.lure||!t.lure||null===t.lure||!t.lure.isValid)return t.run_status=n.stop,{v:void 0};cc.log(" want eat "+t.lure.uuid+" "+t.lure.x);var e=t,o=t.countAngle(t.lure,t.node),i=(Math.cos(o)*t.speed,Math.sin(o)*t.speed,cc.callFunc(function(t,o){if(e.node.stopAllActions(),this.lure.isValid)e.eatAction();else{var i=cc.find("Canvas").getComponent("Game");i.lures.length>0?e.wantEatThink(i.lures):e.run_status=n.stop}},t,0)),c=cc.pDistance(t.node.getPosition(),t.lure.getPosition()),s=.5*t.max_seed;c<200&&(s=.15*t.max_seed),c<80&&(s=.01*t.max_seed),cc.log("new speed:"+s);var a=cc.rotateTo(s/2,o),r=cc.moveTo(s,t.lure);return t.node.stopAllActions(),t.node.runAction(cc.spawn(r,cc.sequence(a,i))),{v:void 0}}();return"object"==typeof e?e.v:void 0},randomRun:function(){var t=this,e=-cc.winSize.width/2+cc.winSize.width*Math.random(),o=-cc.winSize.height/2+(cc.winSize.height-100)*Math.random(),i=this.max_seed*(.8*Math.random()+.2);cc.log("fish random run "+e+","+o+" at "+i);var c=cc.moveTo(i,cc.p(e,o)),s=cc.callFunc(function(e,o){t.run_status=n.stop}),a=this.countAngle(cc.p(e,o),this.node);cc.log("angle:"+a);var r=cc.rotateTo(.25+2*Math.random(),a);this.run_status=n.random;var h=cc.spawn(r,cc.sequence(c,s));h.setTag(n.random),this.node.runAction(h)},wantEatThink:function(t){if(null===t&&(t=cc.find("Canvas").getComponent("Game").lures,cc.log("find lures from canvas")),cc.log("lures:"),cc.log(t),!t)return void cc.log("undefined lures");t.length>0&&(this.run_status=n.find);for(var e=9999,o=0;o<t.length;o++){var i=cc.pDistance(this.node.getPosition(),t[o].getPosition());e>i&&(e=i,this.lure=t[o])}cc.log(" find "+this.lure.uuid),this.eatAction()},actionControl:function(t,e){var o=this.node.position.x,n=this.node.position.y,i=cc.rotateTo(.5,t);i.easing(cc.easeElasticOut());var c=o,s=n;switch(e){case cc.KEY.left:c=o-10;break;case cc.KEY.right:c=o+10;break;case cc.KEY.up:s=n+10;break;case cc.KEY.down:s=n-10}var a=cc.moveTo(1.5,cc.p(c,s));a.easing(cc.easeElasticIn()),this.node.runAction(cc.spawn(i,a))},countRotation:function(t){this.run_status=n.control,this.start_rotation=this.node.rotation,this.end_rotation=t,this.clockwise=1;var e=this.end_rotation-this.start_rotation;0!==e&&360!==e||(this.run_status=n.stop),e<0&&(this.clockwise=-this.clockwise),Math.abs(this.end_rotation-this.start_rotation)>180?(this.turn_rotation=360-Math.abs(this.end_rotation-this.start_rotation),this.clockwise=-this.clockwise):this.turn_rotation=Math.abs(this.end_rotation-this.start_rotation)},onKeyUp:function(t){t.keyCode===this.moveDirection&&(this.moveDirection=null)},onCollisionEnter:function(t,e){if("stoneG"===t.node.group){if(cc.log("fish knock stone"+t.node.group),cc.log(t),void 0===this.stonePolygons){for(var o=[],n=cc.find("Canvas"),i=0;i<t.points.length;i++)o[i]=n.convertToNodeSpaceAR(t.world.points[i]);this.stonePolygons=o,cc.log("memo the stonePolygons")}this.strategyRun(t.node)}if("pathG"===t.node.group&&void 0===this.pathPolygons){cc.log("memo the pathPolygons");for(var o=[],n=cc.find("Canvas"),i=0;i<t.points.length;i++)o[i]=n.convertToNodeSpaceAR(t.world.points[i]);this.pathPolygons=o}"fishG"===t.node.group&&this.strategyRun(t.node,.15,.3,!0,50)},strategyRun:function(t,e,o,i,c){var s=this,a=this;a.run_status!==n.random&&a.run_status!==n.find&&a.run_status!==n.stop||!function(){var r=100+50*Math.random(),h=100+50*Math.random();c&&(r=c*Math.random(),h=c*Math.random());var u=a.run_status,d=void 0,l=void 0;d=t.x>=a.node.x?a.node.x-r:a.node.x+r,l=t.y>=a.node.y?a.node.y-h:a.node.y+h,cc.log("after knock then want "+d+","+l);var g=s.max_seed*(.8*Math.random()+.2);e&&(g=e);var p=cc.moveTo(g,cc.p(d,l)),f=cc.callFunc(function(t,e){u===n.random&&(a.run_status=n.stop),u===n.find&&(a.run_status=u,a.wantEatThink(null))});cc.log("other angle:"+s.countAngle(s.node.convertToNodeSpace(cc.p(d,l)),cc.p(0,0))+" | "+s.countAngle(cc.p(d,l),s.node));var m=s.countAngle(cc.p(d,l),s.node),v=s.turn_speed*Math.random()+.2;o&&(v=o);var C=cc.rotateTo(v,m);s.node.stopAllActions(),cc.log("knock run and status:"+s.run_status+" speed:"+g+" and angle:"+m),i&&s.node.stopAllActions(),s.node.runAction(cc.spawn(C,cc.sequence(p,f)))}()},findPath:function(t,e,o,n,i){if(void 0===i&&(i=[]),!cc.Intersection.linePolygon(t,e,n))return i.unshift(t),i;for(var c=[],s=[],a=0;a<o.length;a++)cc.Intersection.linePolygon(t,o[a],n)?c.push(o[a]):s.push(o[a]);for(var a=0;a<s.length;a++){void 0===i&&(i=[]);var r=this.findPath(s[a],e,c,n,i[a]);if(0===r.length)r=null;else if(Array.isArray(r[0])){for(var h=0;h<r.length;h++)r[h].push(e);i=r}else r.unshift(t),i[a]=r}return i},shortPath:function(t){for(var e=0,o=0,n=0;n<t.length;n++){var i=t[n];if(void 0!==i&&null!==i){if(!Array.isArray(i))return 0==cc.pDistance(t[0],this.node.getPosition())?null:(t.unshift(this.node.getPosition()),t);i.unshift(this.node.getPosition());for(var c=0,s=0;s<i.length-1;s++)c+=cc.pDistance(i[s],i[s+1]);c>o&&(o=c,e=n)}}return t[e].shift(),t[e]},update:function(t){if(this.run_status===n.control&&(this.node.rotation+=this.turn_speed*this.clockwise,this.node.rotation>=0&&(this.node.rotation!==this.end_rotation&&this.node.rotation-360!==this.end_rotation||(this.run_status=n.stop)),this.node.rotation<0&&(360+this.node.rotation!==this.end_rotation&&this.node.rotation+360!==this.end_rotation||(this.run_status=n.stop)),this.node.rotation>360&&(this.node.rotation=this.node.rotation-360),this.node.rotation<-360&&(this.node.rotation=this.node.rotation+360)),this.run_status!=n.control)switch(this.moveDirection){case cc.KEY.left:this.node.x-=this.speed;break;case cc.KEY.right:this.node.x+=this.speed;break;case cc.KEY.up:this.node.y+=this.speed;break;case cc.KEY.down:this.node.y-=this.speed}Math.abs(this.node.x)>(cc.winSize.width-100)/2&&(this.node.x=(cc.winSize.width-100)/2*this.node.x/Math.abs(this.node.x)),Math.abs(this.node.y)>(cc.winSize.height-10)/2&&(this.node.y=(cc.winSize.height-100)/2*this.node.y/Math.abs(this.node.y))}}),cc._RFpop()},{}],Game:[function(t,e,o){"use strict";cc._RFpush(e,"39f2bgOI5VOFK2KRBCTA0jb","Game"),cc.Class({"extends":cc.Component,properties:{lurePrefab:cc.Prefab,fishPrefab:cc.Prefab,knock:cc.Node,score:cc.Node,timer:cc.Node,eatCount:cc.Node,board:cc.Node,bigLure:cc.Node,stone:cc.Node,menu:cc.Node,stageString:cc.Node,stage:1,disperseDistance:100,fish:{"default":null,type:cc.Node},otherFish:{"default":[],type:cc.Node}},onLoad:function(){var t=this,e=cc.director.getCollisionManager();e.enabled=!0,this.knock.active=!1,this.knockAnimation=this.knock.getComponent(cc.Animation),this.scoreLabel=this.score.getComponent(cc.Label),this.scoreScript=this.score.getComponent("Score");var o=cc.find("loading").getComponent("Loading").stagesData;t.menu.active=!0,t.menu.getComponent("Menu").init(o),t.stagesData=o,this.lures=[],this.node.on("lure_over",function(t){cc.log(t)}),this.node.on("lure_eated",function(e){t.scoreScript.eat()}),this.node.on("throw_lure",function(e){var o=e.getUserData();t.throw_lure(o),t.wantEatThink()}),this.node.on("lure_destroy",function(e){for(var o=0;o<t.lures.length;o++)t.lures[o].uuid==e.detail.uuid&&(t.lures[o].destroy(),t.lures.splice(o,1));cc.log("now there are "+t.lures.length+" lures")}),this.node.on("time_up",function(e){t.board.active=!0,t.board.setPosition(0,0),cc.log("self.stage:"+t.stage+" self.scoreScript.eatCount:"+t.scoreScript.eatCount),t.board.getComponent("Board").init({stage:t.stage,score:t.scoreScript.eatCount}),t.unscheduleAllCallbacks();for(var o=0;o<t.otherFish.length;o++)t.fishPool.put(t.otherFish[o]);t.fish.destroy();for(var o=0;o<t.lures.length;o++)t.lures[o].destroy();t.lures=[]}),this.node.on("select_stage",function(e){t.menu.active=!1,t.enterStage(),t.fishScript=t.fish.getComponent("Control"),t.randomLures(t.stageData.throw_lure.count,t.stageData.throw_lure.interval),t.timer.getComponent("Timer").totaltime=t.stageData.timer,t.timer.getComponent("Timer").isGrowUp=!1,t.timer.getComponent("Timer").init(t.stageData.timer),t.eatCount.getComponent(cc.Label).string=0,t.scoreScript.eatCount=0}),this.node.on("next_stage",function(e){t.stage++,t.enterStage(),t.fishScript=t.fish.getComponent("Control"),t.randomLures(t.stageData.throw_lure.count,t.stageData.throw_lure.interval),t.timer.getComponent("Timer").totaltime=t.stageData.timer,t.timer.getComponent("Timer").isGrowUp=!1,t.timer.getComponent("Timer").init(t.stageData.timer),t.eatCount.getComponent(cc.Label).string=0,t.scoreScript.eatCount=0}),this.node.on("menu",function(e){t.menu.active=!0,t.menu.getComponent("Menu").init(t.stagesData)}),this.node.on("reload",function(e){t.enterStage(),t.fishScript=t.fish.getComponent("Control"),t.randomLures(t.stageData.throw_lure.count,t.stageData.throw_lure.interval),t.timer.getComponent("Timer").totaltime=t.stageData.timer,t.timer.getComponent("Timer").isGrowUp=!1,t.timer.getComponent("Timer").init(t.stageData.timer),t.eatCount.getComponent(cc.Label).string=0,t.scoreScript.eatCount=0}),this.lurePool=new cc.NodePool,this.fishPool=new cc.NodePool,this.node.on(cc.Node.EventType.TOUCH_END,function(e){var o=e.getCurrentTarget(),n=o.convertToNodeSpaceAR(e.getLocation());cc.log("touchX:"+n.x),e.getLocation().x<50||e.getLocation.x>cc.winSize.width-50||(t.knock.x=n.x,t.knock.y=n.y,t.knock.active=!0,t.knockAnimation.play(),t.disperseFish(n))})},disperseFish:function(t){for(var e=0;e<this.otherFish.length;e++){var o=cc.pDistance(t,this.otherFish[e].getPosition());o<this.disperseDistance&&(this.otherFish[e].stopAllActions(),this.otherFish[e].getComponent("Control").strategyRun(t,.3,.3,!0),cc.log("disperse"))}var n=cc.pDistance(t,this.fish.getPosition());n<this.disperseDistance&&(this.fish.stopAllActions(),this.fish.getComponent("Control").strategyRun(t,.3,.3,!0),cc.log("disperse"))},wantEatThink:function(){var t=this;t.fishScript.wantEatThink(t.lures);for(var e=0;e<t.otherFish.length;e++)t.otherFish[e].getComponent("Control").wantEatThink(t.lures)},randomLures:function(t,e){for(var o=this,n=0;n<t;n++){var i=-cc.winSize.width/2+50+(cc.winSize.width-100)*Math.random();o.throw_lure(i)}o.wantEatThink(),this.schedule(function(){for(var e=0;e<t;e++){var n=-cc.winSize.width/2+50+(cc.winSize.width-100)*Math.random();o.throw_lure(n)}o.wantEatThink()},e)},enterStage:function(){var t=this;if(t.stageString.getComponent(cc.Label).string="第"+t.stage+"关",t.stageData&&t.stageData.stage===t.stage);else for(var e=0;e<t.stagesData.length;e++)if(t.stagesData[e].stage===t.stage){t.stageData=t.stagesData[e];break}t.stageData.stone?t.stone.active=!0:t.stone.active=!1,t.stageData.bigLure?t.bigLure.active=!0:t.bigLure.active=!1,t.stageData.fish.favorite=!1;for(var o=t.stageData.otherFishCount,e=0;e<o;e++){var n=null;n=t.fishPool.size()>0?t.fishPool.get():cc.instantiate(t.fishPrefab),cc.log("create otherFish:"+n.uuid);var i=this.getRandomPosition();n.setPosition(i),n.getComponent("Control").init(t.stageData.fish),n.parent=t.node,t.otherFish.push(n)}t.stageData.fish.favorite=!0;var c=cc.instantiate(t.fishPrefab);cc.log("create favorite fish :"+c.uuid);var s=this.getRandomPosition();c.setPosition(s),c.getComponent("Control").init(t.stageData.fish),c.parent=t.node,t.fish=c},getRandomPosition:function(){var t=-cc.winSize.height/2+(cc.winSize.height-100)*Math.random(),e=-cc.winSize.width/2+cc.winSize.width*Math.random();return cc.p(e,t)},throw_lure:function(t){var e=this,o=null;o=e.lurePool.size()>0?e.lurePool.get():cc.instantiate(e.lurePrefab),cc.log("throw_lure"+o),o.y=cc.winSize.height/2-100,o.getComponent("lure").init(t),o.parent=e.node,e.lures.push(o)}}),cc._RFpop()},{}],Knock:[function(t,e,o){"use strict";cc._RFpush(e,"6981djXWnZIyrY6vL/UyAB5","Knock"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},destory:function(){cc.log("knock completed"),this.node.active=!1}}),cc._RFpop()},{}],Loading:[function(t,e,o){"use strict";cc._RFpush(e,"17cadHv4FRNUZia/ii039cz","Loading"),cc.Class({"extends":cc.Component,properties:{label:cc.Node,fish:cc.Node},onLoad:function(){var t=this;this.label.on(cc.Node.EventType.TOUCH_END,function(e){t.loadScene()})},startLoading:function(){this.label.enabled=!1;var t=cc.view.getVisibleSize();this.node.setPosition(cc.p(t.width/2-this.node.width/2,t.height/4)),this.fish.setPosition(0,0)},stopLoading:function(){var t=this;t.label.enabled=!0,cc.log("stop loading")}}),cc._RFpop()},{}],Menu:[function(t,e,o){"use strict";cc._RFpush(e,"ae375DjhbtMN7IDSy5GWlo7","Menu"),cc.Class({"extends":cc.Component,properties:{stagePrefab:cc.Prefab,menuLayout:cc.Node},onLoad:function(){},init:function(t){var e=this;this.node.active=!0,e.menuLayout.removeAllChildren();for(var o=0;o<t.length;o++){var n=cc.instantiate(e.stagePrefab),i=n.getComponent("StageMenu");i.init(t[o]),e.menuLayout.addChild(n)}this.node.setPosition(0,0)}}),cc._RFpop()},{}],SceneManager:[function(t,e,o){"use strict";cc._RFpush(e,"51205f1AfVGAr+y/sXkq9ih","SceneManager");var n=t("Loading");cc.Class({"extends":cc.Component,properties:{loading:n},onLoad:function(){var t=this;cc.view.enableAntiAlias(!1),cc.game.addPersistRootNode(this.node),this.loadScene("main"),this.loading.loadScene=function(){cc.director.loadScene(t.curLoadingScene)}},loadScene:function(t){var e=this;this.loading.startLoading(),this.curLoadingScene=t,cc.loader.loadRes("stages.json",function(o,n){e.loading.stagesData=n,cc.director.preloadScene(t,e.onSceneLoaded.bind(e))})},onSceneLoaded:function(t){cc.log(this),this.loading.stopLoading()}}),cc._RFpop()},{Loading:"Loading"}],Score:[function(t,e,o){"use strict";cc._RFpush(e,"6ca57sW9mFCR6xlB5LGptuu","Score"),cc.Class({"extends":cc.Component,properties:{totalCount:0,eatCount:0},onLoad:function(){this.label=this.getComponent(cc.Label)},eat:function(){this.eatCount++,this.label.string=this.eatCount}}),cc._RFpop()},{}],StageMenu:[function(t,e,o){"use strict";cc._RFpush(e,"eaaceTqmkBC1K3pJ+UgkLP3","StageMenu"),cc.Class({"extends":cc.Component,properties:{star1:cc.Node,star2:cc.Node,star3:cc.Node,lock:cc.Node,stageString:cc.Node},onLoad:function(){},init:function(t){var e=this;this.stage=t.stage,this.stageString.getComponent(cc.Label).string="第"+this.stage+"关";var o=cc.sys.localStorage.getItem("stage"+this.stage);if(o){var n=JSON.parse(o).bestScore;n>=t.star1?this.star1.color=new cc.Color(255,255,255):this.star1.color=new cc.Color(100,100,100),n>=t.star2?this.star2.color=new cc.Color(255,255,255):this.star2.color=new cc.Color(100,100,100),n>=t.star3?this.star3.color=new cc.Color(255,255,255):this.star3.color=new cc.Color(100,100,100),this.lock.active=!1}else this.star1.color=new cc.Color(100,100,100),this.star2.color=new cc.Color(100,100,100),this.star3.color=new cc.Color(100,100,100),this.star1.active=!1,this.star2.active=!1,this.star3.active=!1,this.lock.active=!0;1===e.stage&&(this.lock.active=!1,this.star1.active=!0,this.star2.active=!0,this.star3.active=!0),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(!e.lock.active){var o=new cc.Event.EventCustom("select_stage",(!0));o.setUserData(e.stage),e.node.dispatchEvent(o)}})}}),cc._RFpop()},{}],Stone:[function(t,e,o){"use strict";cc._RFpush(e,"5af29gBhHtLF5gYaPGFMYC5","Stone"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},onCollisionEnter:function(t,e){cc.log("something knock stone"+t.node.group),"fishG"===t.node.group}}),cc._RFpop()},{}],Timer:[function(t,e,o){"use strict";cc._RFpush(e,"5ddf0KXb8FLdIM8fdfs48C1","Timer"),cc.Class({"extends":cc.Component,properties:{isGrowUp:!0,isClock:!0,totaltime:20,initTime:0},onLoad:function(){this.label=this.getComponent(cc.Label)},init:function(t){this.unscheduleAllCallbacks();var e=this,o=function(t){var e=Object.prototype.toString.call(t);return e.match(/\[object (.*?)\]/)[1].toLowerCase()};"number"===o(t)&&(e.initTime=t),this.label.string=e.formatSeconds(e.initTime),this.callback=this.schedule(function(){e.label.string=e.formatSeconds(e.initTime),e.isGrowUp?e.initTime++:e.initTime--,e.initTime<0&&(e.node.dispatchEvent(new cc.Event.EventCustom("time_up",(!0))),e.unscheduleAllCallbacks()),e.initTime>e.totaltime&&(e.node.dispatchEvent(new cc.Event.EventCustom("time_up",(!0))),e.unscheduleAllCallbacks())},1)},formatSeconds:function(t){var e=parseInt(t),o=0,n=0;e>60&&(o=parseInt(e/60),e=parseInt(e%60),o>60&&(n=parseInt(o/60),o=parseInt(o%60)));var i=""+parseInt(e)+"秒";return o>0&&(i=""+parseInt(o)+"分"+i),n>0&&(i=""+parseInt(n)+"小时"+i),i}}),cc._RFpop()},{}],lure:[function(t,e,o){"use strict";cc._RFpush(e,"98691dXmpBOwqyJ9EURgrAz","lure");t("Game");cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.anim=this.getComponent(cc.Animation);var t=(this.node.x,-cc.winSize.height/2,-30-30*Math.random());cc.log("downspeed="+t);var e=cc.moveBy(1.5,cc.p(-40,t),10),o=cc.moveBy(1.5,cc.p(40,t),10);this.node.runAction(cc.repeatForever(cc.sequence(e,o)))},init:function(t){this.node.x=t,cc.log(this.node.uuid+" is created")},lateUpdate:function(t){var e=this;if(this.node.y<-cc.winSize.height/2+10){cc.log(" over "+this.node.uuid+" this.node.y:"+this.node.y),e.deteriorate();var o=cc.find("Canvas");o.emit("lure_over",{msg:"Hello, this is Cocos Creator"+e.node.uuid})}this.node.y=cc.clampf(this.node.y,-cc.winSize.height/2+10,cc.winSize.height/2-100)},deteriorate:function(){var t=this;this.node.stopAllActions(),this.anim.stop(),this.scheduleOnce(function(){var e=cc.callFunc(function(e,o){cc.find("Canvas").emit("lure_destroy",{uuid:t.node.uuid})},this,0),o=cc.tintTo(10,0,0,0);t.node.runAction(cc.sequence(o,e))},1)},onCollisionEnter:function(t,e){"fishG"===t.node.group&&(cc.log("fish.node.group"+t.node.group),this.node.stopAllActions(),t.getComponent("Control").favorite&&this.node.dispatchEvent(new cc.Event.EventCustom("lure_eated",(!0))),cc.find("Canvas").emit("lure_destroy",{uuid:e.node.uuid})),"stoneG"===t.node.group&&(cc.log("lure knock stone "+t.node.group),this.deteriorate())}}),cc._RFpop()},{Game:"Game"}]},{},["Loading","Game","Control","SceneManager","Camera","Stone","Timer","Knock","Score","lure","Menu","Board","Biglure","StageMenu"]);